<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Tasks &middot; Funnel</title>
  

  
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/poole.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/darcula.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/syntax.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/theme.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ohsu-comp-bio.github.io/funnel/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://ohsu-comp-bio.github.io/funnel/favicon.png">

  <script src="https://ohsu-comp-bio.github.io/funnel/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://ohsu-comp-bio.github.io/funnel/"><h1>Funnel</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://ohsu-comp-bio.github.io/funnel/download/">Download</a></li>
          <li><a href="https://ohsu-comp-bio.github.io/funnel/docs/">Docs</a></li>
          <li><a href="https://github.com/ohsu-comp-bio/funnel">GitHub</a></li>
          <li><a href="https://gitter.im/ohsu-comp-bio/funnel">Chat</a></li>
          <li><a href="https://ohsu-comp-bio.github.io/funnel-compliance/">Compliance</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/xd/education/schools/school-of-medicine/departments/computational-biology/"><h2>OHSU Comp Bio</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li>
          
          <a href="https://ohsu-comp-bio.github.io/funnel/download/"
             class="sidebar-nav-item "
          >Download</a></li>
          
        
        <li>
          
          <a href="https://ohsu-comp-bio.github.io/funnel/docs/"
             class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li>
          
          <a href="https://ohsu-comp-bio.github.io/funnel/docs/tasks/"
             class="sidebar-nav-item  active"
          >Tasks</a></li>
          
        
        <li>
          
          <span class="intermediate">Storage</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/local/"
                   class="sidebar-nav-item "
                >Local</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/ftp/"
                   class="sidebar-nav-item "
                >FTP</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/google-storage/"
                   class="sidebar-nav-item "
                >Google Storage</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/http/"
                   class="sidebar-nav-item "
                >HTTP(S)</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/swift/"
                   class="sidebar-nav-item "
                >OpenStack Swift</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/storage/s3/"
                   class="sidebar-nav-item "
                >S3</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Compute</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/deployment/"
                   class="sidebar-nav-item "
                >Deploying a cluster</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/aws-batch/"
                   class="sidebar-nav-item "
                >AWS Batch</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/grid-engine/"
                   class="sidebar-nav-item "
                >Grid Engine</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/htcondor/"
                   class="sidebar-nav-item "
                >HTCondor</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/kubernetes/"
                   class="sidebar-nav-item "
                >Kubernetes</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/pbs-torque/"
                   class="sidebar-nav-item "
                >PBS/Torque</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/compute/slurm/"
                   class="sidebar-nav-item "
                >Slurm</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Databases</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/databases/boltdb/"
                   class="sidebar-nav-item "
                >Embedded</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/databases/datastore/"
                   class="sidebar-nav-item "
                >Datastore</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/databases/dynamodb/"
                   class="sidebar-nav-item "
                >DynamoDB</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/databases/elasticsearch/"
                   class="sidebar-nav-item "
                >Elasticsearch</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/databases/mongodb/"
                   class="sidebar-nav-item "
                >MongoDB</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Events</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/events/kafka/"
                   class="sidebar-nav-item "
                >Kafka</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Metrics</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/metrics/prometheus/"
                   class="sidebar-nav-item "
                >Prometheus</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Security</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/security/basic/"
                   class="sidebar-nav-item "
                >Basic Auth</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Development</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/development/developers/"
                   class="sidebar-nav-item "
                >Funnel Developers</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://godoc.org/github.com/ohsu-comp-bio/funnel"
                   class="sidebar-nav-item "
                >Reference</a></li>
            </ul>
          </li>
          
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    <h1 id="tasks">Tasks</h1>
<p>A task defines a unit of work:</p>
<ul>
<li>metadata</li>
<li>input files to download</li>
<li>a sequence of Docker containers + commands to run,</li>
<li>output files to upload</li>
<li>state</li>
<li>logs</li>
</ul>
<p>The example task below downloads a file named <code>hello.txt</code> from S3 and calls <code>cat hello.txt</code> using the <a href="https://hub.docker.com/_/alpine/">alpine</a> container. This task also writes the executor&rsquo;s stdout to a file, and uploads the stdout to s3.</p>
<pre tabindex="0"><code>{
  &#34;name&#34;: &#34;Hello world&#34;,
  &#34;inputs&#34;: [{
    # URL to download file from.
    &#34;url&#34;: &#34;s3://funnel-bucket/hello.txt&#34;,
    # Path to download file to.
    &#34;path&#34;: &#34;/inputs/hello.txt&#34;
  }],
  &#34;outputs&#34;: [{
    # URL to upload file to.
    &#34;url&#34;: &#34;s3://funnel-bucket/output.txt&#34;,
    # Local path to upload file from.
    &#34;path&#34;: &#34;/outputs/stdout&#34;
  }],
  &#34;executors&#34;: [{
      # Container image name.
      &#34;image&#34;: &#34;alpine&#34;,
      # Command to run (argv).
      &#34;command&#34;: [&#34;cat&#34;, &#34;/inputs/hello.txt&#34;],
      # Capture the stdout of the command to /outputs/stdout
      &#34;stdout&#34;: &#34;/outputs/stdout&#34;
  }]
}
</code></pre><p>Tasks have multiple &ldquo;executors&rdquo;; containers and commands run in a sequence.
Funnel runs executors via Docker.</p>
<p>Tasks also have state and logs:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;b85khc2rl6qkqbhg8vig&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;COMPLETE&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Hello world&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;inputs&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;s3://funnel-bucket/hello.txt&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/inputs/hello.txt&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;outputs&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;s3://funnel-bucket/output.txt&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/outputs/stdout&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;executors&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;image&#34;</span>: <span style="color:#e6db74">&#34;alpine&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cat&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/inputs/hello.txt&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;stdout&#34;</span>: <span style="color:#e6db74">&#34;/outputs/stdout&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;logs&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;logs&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;startTime&#34;</span>: <span style="color:#e6db74">&#34;2017-11-14T11:49:05.127885125-08:00&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;endTime&#34;</span>: <span style="color:#e6db74">&#34;2017-11-14T11:49:08.484461502-08:00&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;stdout&#34;</span>: <span style="color:#e6db74">&#34;Hello, Funnel!\n&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;startTime&#34;</span>: <span style="color:#e6db74">&#34;2017-11-14T11:49:04.433593468-08:00&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;endTime&#34;</span>: <span style="color:#e6db74">&#34;2017-11-14T11:49:08.487707039-08:00&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#e6db74">&#34;2017-11-14T11:49:04.427163701-08:00&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>There are logs for each task attempt and each executor. Notice that the stdout is
conveniently captured by <code>logs[0].logs[0].stdout</code>.</p>
<h3 id="task-api">Task API</h3>
<p>The API lets you create, get, list, and cancel tasks.</p>
<h3 id="create">Create</h3>
<pre tabindex="0"><code>POST /v1/tasks
{
  &#34;name&#34;: &#34;Hello world&#34;,
  &#34;inputs&#34;: [{
    &#34;url&#34;: &#34;s3://funnel-bucket/hello.txt&#34;,
    &#34;path&#34;: &#34;/inputs/hello.txt&#34;
  }],
  &#34;outputs&#34;: [{
    &#34;url&#34;: &#34;s3://funnel-bucket/output.txt&#34;,
    &#34;path&#34;: &#34;/outputs/stdout&#34;
  }],
  &#34;executors&#34;: [{
      &#34;image&#34;: &#34;alpine&#34;,
      &#34;command&#34;: [&#34;cat&#34;, &#34;/inputs/hello.txt&#34;],
      &#34;stdout&#34;: &#34;/outputs/stdout&#34;
  }]
}


# The response is a task ID:
b85khc2rl6qkqbhg8vig
</code></pre><h3 id="get">Get</h3>
<pre tabindex="0"><code>GET /v1/tasks/b85khc2rl6qkqbhg8vig

{&#34;id&#34;: &#34;b85khc2rl6qkqbhg8vig&#34;, &#34;state&#34;: &#34;COMPLETE&#34;}
</code></pre><p>By default, the minimal task view is returned which describes only the ID and state.
In order to get the original task with some basic logs, use the &ldquo;BASIC&rdquo; task view:</p>
<pre tabindex="0"><code>GET /v1/tasks/b85khc2rl6qkqbhg8vig?view=BASIC
{
  &#34;id&#34;: &#34;b85khc2rl6qkqbhg8vig&#34;,
  &#34;state&#34;: &#34;COMPLETE&#34;,
  &#34;name&#34;: &#34;Hello world&#34;,
  &#34;inputs&#34;: [
    {
      &#34;url&#34;: &#34;gs://funnel-bucket/hello.txt&#34;,
      &#34;path&#34;: &#34;/inputs/hello.txt&#34;
    }
  ],
  &#34;outputs&#34;: [
    {
      &#34;url&#34;: &#34;s3://funnel-bucket/output.txt&#34;,
      &#34;path&#34;: &#34;/outputs/stdout&#34;
    }
  ],
  &#34;executors&#34;: [
    {
      &#34;image&#34;: &#34;alpine&#34;,
      &#34;command&#34;: [
        &#34;cat&#34;,
        &#34;/inputs/hello.txt&#34;
      ],
      &#34;stdout&#34;: &#34;/outputs/stdout&#34;,
    }
  ],
  &#34;logs&#34;: [
    {
      &#34;logs&#34;: [
        {
          &#34;startTime&#34;: &#34;2017-11-14T11:49:05.127885125-08:00&#34;,
          &#34;endTime&#34;: &#34;2017-11-14T11:49:08.484461502-08:00&#34;,
        }
      ],
      &#34;startTime&#34;: &#34;2017-11-14T11:49:04.433593468-08:00&#34;,
      &#34;endTime&#34;: &#34;2017-11-14T11:49:08.487707039-08:00&#34;
    }
  ],
  &#34;creationTime&#34;: &#34;2017-11-14T11:49:04.427163701-08:00&#34;
}
</code></pre><p>The &ldquo;BASIC&rdquo; doesn&rsquo;t include some fields such as stdout/err logs, because these fields may be potentially large.
In order to get everything, use the &ldquo;FULL&rdquo; view:</p>
<pre tabindex="0"><code>GET /v1/tasks/b85khc2rl6qkqbhg8vig?view=FULL
{
  &#34;id&#34;: &#34;b85khc2rl6qkqbhg8vig&#34;,
  &#34;state&#34;: &#34;COMPLETE&#34;,
  &#34;name&#34;: &#34;Hello world&#34;,
  &#34;inputs&#34;: [
    {
      &#34;url&#34;: &#34;gs://funnel-bucket/hello.txt&#34;,
      &#34;path&#34;: &#34;/inputs/hello.txt&#34;
    }
  ],
  &#34;executors&#34;: [
    {
      &#34;image&#34;: &#34;alpine&#34;,
      &#34;command&#34;: [
        &#34;cat&#34;,
        &#34;/inputs/hello.txt&#34;
      ],
      &#34;stdout&#34;: &#34;/outputs/stdout&#34;,
    }
  ],
  &#34;logs&#34;: [
    {
      &#34;logs&#34;: [
        {
          &#34;startTime&#34;: &#34;2017-11-14T11:49:05.127885125-08:00&#34;,
          &#34;endTime&#34;: &#34;2017-11-14T11:49:08.484461502-08:00&#34;,
          &#34;stdout&#34;: &#34;Hello, Funnel!\n&#34;
        }
      ],
      &#34;startTime&#34;: &#34;2017-11-14T11:49:04.433593468-08:00&#34;,
      &#34;endTime&#34;: &#34;2017-11-14T11:49:08.487707039-08:00&#34;
    }
  ],
  &#34;creationTime&#34;: &#34;2017-11-14T11:49:04.427163701-08:00&#34;
}
</code></pre><h3 id="list">List</h3>
<pre tabindex="0"><code>GET /v1/tasks
{
  &#34;tasks&#34;: [
    {
      &#34;id&#34;: &#34;b85l8tirl6qkqbhg8vj0&#34;,
      &#34;state&#34;: &#34;COMPLETE&#34;
    },
    {
      &#34;id&#34;: &#34;b85khc2rl6qkqbhg8vig&#34;,
      &#34;state&#34;: &#34;COMPLETE&#34;
    },
    {
      &#34;id&#34;: &#34;b85kgt2rl6qkpuptua70&#34;,
      &#34;state&#34;: &#34;SYSTEM_ERROR&#34;
    },
    {
      &#34;id&#34;: &#34;b857gnirl6qjfou61fh0&#34;,
      &#34;state&#34;: &#34;SYSTEM_ERROR&#34;
    }
  ]
}
</code></pre><p>List has the same task views as Get: MINIMAL, BASIC, and FULL.</p>
<p>The task list is paginated:</p>
<pre tabindex="0"><code>GET /v1/tasks?page_token=1h123h12j2h3k
{
  &#34;next_page_token&#34;: &#34;1n3n1j23k12n3k123&#34;,
  &#34;tasks&#34;: [
    {
      &#34;id&#34;: &#34;b85l8tirl6qkqbhg8vj0&#34;,
      &#34;state&#34;: &#34;COMPLETE&#34;
    },
    # ... more tasks here ...
  ]
}
</code></pre><h3 id="cancel">Cancel</h3>
<p>Tasks cannot be modified by the user after creation, with one exception â€“ they can be canceled.</p>
<pre tabindex="0"><code>POST /v1/tasks/b85l8tirl6qkqbhg8vj0:cancel
</code></pre><h3 id="full-task-spec">Full task spec</h3>
<p>Here&rsquo;s a more detailed description of a task.<br>
For a full, in-depth spec, read the TES standard&rsquo;s <a href="https://github.com/ga4gh/task-execution-schemas/blob/master/task_execution.proto">task_execution.proto</a>.</p>
<pre tabindex="0"><code>{
    # The task&#39;s ID. Set by the server.
    # Output only.
    &#34;id&#34;: &#34;1234567&#34;,

    # The task&#39;s state. Possible states:
    #   QUEUED
    #   INITILIZING
    #   RUNNING
    #   PAUSED
    #   COMPLETE
    #   EXECUTOR_ERROR
    #   SYSTEM_ERROR
    #   CANCELED
    #
    # Output only.
    &#34;state&#34;: &#34;QUEUED&#34;,

    # Metadata
    &#34;name&#34;:        &#34;Task name.&#34;,
    &#34;description&#34;: &#34;Task description.&#34;,
    &#34;tags&#34;: {
      &#34;custom-tag-1&#34;: &#34;tag-value-1&#34;,
      &#34;custom-tag-2&#34;: &#34;tag-value-2&#34;,
    },

    # Resource requests
    &#34;resources&#34;: {
      # Number of CPU cores requested.
      &#34;cpuCores&#34;: 1,

      # RAM request, in gigabytes.
      &#34;ramGb&#34;:    1.0,

      # Disk space request, in gigabytes.
      &#34;diskGb&#34;:   100.0,

      # Request preemptible machines,
      # e.g. preemptible VM in Google Cloud, an instance from the AWS Spot Market, etc.
      &#34;preemptible&#34;: false,

       # Request that the task run in these compute zones.
       &#34;zones&#34;: [&#34;zone1&#34;, &#34;zone2&#34;],
    },

    # Input files will be downloaded by the worker.
    # This example uses s3, but Funnel supports multiple filesystems.
    &#34;inputs&#34;: [
      {
        &#34;name&#34;: &#34;Input file.&#34;,
        &#34;description&#34;: &#34;Input file description.&#34;,

        # URL to download file from.
        &#34;url&#34;:  &#34;s3://my-bucket/object/path/file.txt&#34;,
        # Path to download file to.
        &#34;path&#34;: &#34;/container/input.txt&#34;
      },
      {
        &#34;name&#34;: &#34;Input directory.&#34;,
        &#34;description&#34;: &#34;Directories are also supported.&#34;,
        &#34;url&#34;:  &#34;s3://my-bucket/my-data/&#34;,
        &#34;path&#34;: &#34;/inputs/my-data/&#34;,
        &#34;type&#34;: &#34;DIRECTORY&#34;
      },

      # A task may include the file content directly in the task message.
      # This is sometimes useful for small files such as scripts,
      # which you want to include without talking directly to the filesystem.
      {
        &#34;path&#34;: &#34;/inputs/script.py&#34;,
        &#34;content&#34;: &#34;import socket; print socket.gethostname()&#34;
      }
    ],

    # Output files will be uploaded to storage by the worker.
    &#34;outputs&#34;: [
      {
        &#34;name&#34;: &#34;Output file.&#34;,
        &#34;description&#34;: &#34;Output file description.&#34;,
        &#34;url&#34;:  &#34;s3://my-bucket/output-data/results.txt&#34;,
        &#34;path&#34;: &#34;/outputs/results.txt&#34;
      },
      {
        &#34;name&#34;: &#34;Output directory.&#34;,
        &#34;description&#34;: &#34;Directories are also supported.&#34;,
        &#34;url&#34;:  &#34;s3://my-bucket/output-data/output-dir/&#34;,
        &#34;path&#34;: &#34;/outputs/data-dir/&#34;,
        &#34;type&#34;: &#34;DIRECTORY&#34;
      }
    ],

    # Executors define a sequence of containers + commands to run.
    # Execution stop on the first non-zero exit code.
    &#34;executors&#34;: [
      {
        # Container image name.
        # Funnel supports running executor containers via Docker.
        &#34;image&#34;: &#34;ubuntu&#34;,

        # Command arguments (argv).
        # The first item is the executable to run.
        &#34;command&#34;: [&#34;my-tool-1&#34;, &#34;/container/input&#34;],

        # Local file path to read stdin from.
        &#34;stdin&#34;: &#34;/inputs/stdin.txt&#34;,

        # Local file path to write stdout to.
        &#34;stdout&#34;: &#34;/container/output&#34;,

        # Local file path to write stderr to.
        &#34;stderr&#34;: &#34;/container/stderr&#34;,

        # Set the working directory before executing the command.
        &#34;workdir&#34;: &#34;/data/workdir&#34;,

        # Environment variables
        &#34;env&#34;: {
          &#34;ENV1&#34;: &#34;value1&#34;,
          &#34;ENV2&#34;: &#34;value2&#34;,
        }
      },

      # Second executor runs after the first completes, on the same machine.
      {
        &#34;image&#34;: &#34;ubuntu&#34;,
        &#34;command&#34;: [&#34;cat&#34;, &#34;/container/input&#34;],
        &#34;stdout&#34;: &#34;/container/output&#34;,
        &#34;stderr&#34;: &#34;/container/stderr&#34;,
        &#34;workdir&#34;: &#34;/tmp&#34;
      }
    ]

    # Date/time the task was created.
    # Set the the server.
    # Output only.
    &#34;creationTime&#34;: &#34;2017-11-14T11:49:04.427163701-08:00&#34;

    # Task logs.
    # Output only.
    #
    # If there&#39;s a system error, the task may be attempted multiple times,
    # so this field is a list of attempts. In most cases, there will be only
    # one or zero entries here.
    &#34;logs&#34;: [

      # Attempt start/end times, in RFC3339 format.
      &#34;startTime&#34;: &#34;2017-11-14T11:49:04.433593468-08:00&#34;,
      &#34;endTime&#34;: &#34;2017-11-14T11:49:08.487707039-08:00&#34;

      # Arbitrary metadata set by Funnel.
      &#34;metadata&#34;: {
        &#34;hostname&#34;: &#34;worker-1&#34;,
      },

      # Arbitrary system logs which Funnel thinks are useful to the user.
      &#34;systemLogs&#34;: [
        &#34;task was assigned to worker 1&#34;,
        &#34;docker command: docker run -v /vol:/data alpine cmd arg1 arg2&#34;,
      ],

      # Log of files uploaded to storage by the worker,
      # including all files in directories, with file sizes.
      &#34;outputs&#34;: [
        {
          &#34;url&#34;: &#34;s3://my-bucket/output-data/results.txt&#34;,
          &#34;path&#34;: &#34;/outputs/results.txt&#34;,
          &#34;sizeBytes&#34;: 123
        },
        {
          &#34;url&#34;: &#34;s3://my-bucket/output-data/output-dir/file1.txt&#34;,
          &#34;path&#34;: &#34;/outputs/data-dir/file1.txt&#34;,
          &#34;sizeBytes&#34;: 123
        },
        {
          &#34;url&#34;: &#34;s3://my-bucket/output-data/output-dir/file2.txt&#34;,
          &#34;path&#34;: &#34;/outputs/data-dir/file2.txt&#34;,
          &#34;sizeBytes&#34;: 123
        }
        {
          &#34;url&#34;: &#34;s3://my-bucket/output-data/output-dir/subdir/file3.txt&#34;,
          &#34;path&#34;: &#34;/outputs/data-dir/subdir/file3.txt&#34;,
          &#34;sizeBytes&#34;: 123
        }
      ],

      # Executor logs. One entry per executor.
      &#34;logs&#34;: [
        {
          # Executor start/end time, in RFC3339 format.
          &#34;startTime&#34;: &#34;2017-11-14T11:49:05.127885125-08:00&#34;,
          &#34;endTime&#34;: &#34;2017-11-14T11:49:08.484461502-08:00&#34;,

          # Executor stdout/err. Only available in the FULL task view.
          #
          # There is a size limit for these fields, which is configurable
          # and defaults to 10KB. If more than 10KB is generated, only the
          # tail will be logged. If the full output is needed, the task
          # may use Executor.stdout and an output to upload the full content
          # to storage.
          &#34;stdout&#34;: &#34;Hello, Funnel!&#34;,
          &#34;stderr&#34;: &#34;&#34;,

          # Exit code
          &#34;exit_code&#34;: 0,
        },
        {
          &#34;startTime&#34;: &#34;2017-11-14T11:49:05.127885125-08:00&#34;,
          &#34;endTime&#34;: &#34;2017-11-14T11:49:08.484461502-08:00&#34;,
          &#34;stdout&#34;: &#34;Hello, Funnel!\n&#34;
        }
      ],
    }
  ],
}
</code></pre>
  </div>

</div>
</body>
</html>
