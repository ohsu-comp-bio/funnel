# Optionally debug via SSH
# Ref: https://fleetdm.com/engineering/tips-for-github-actions-usability
#
# To use this step uncomment and place anywhere in the build steps. The build will pause on this step and
# output a ssh address associated with the Github action worker. Helpful for debugging build steps and
# and intermediary files/artifacts.
#
# - name: Setup tmate session
#   uses: mxschmitt/action-tmate@v3

name: K8s Test

on:
  push:
  pull_request:

jobs:
  build:
    uses: ./.github/workflows/build.yml

  test:
    # needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Install k3d
        run: |
          wget -q -O - https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash
        #   kubectl get nodes

      - name: Setup tmate session
        uses: mxschmitt/action-tmate@v3
